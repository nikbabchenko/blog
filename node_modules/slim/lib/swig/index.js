'use strict';

/**
 * Настраивает шаблонизатор Swig, добавляем новые теги.
 */

var services = require('../services');
var swig = require('swig');

// Массив тегов.
var tags = [
	require('./urlto')
];

// Настройки шаблонизатора по умолчанию.
swig.setDefaults({
	autoescape: false,
	varControls: ['{$', '$}'],
	tagControls: ['{%', '%}'],
	cmtControls: ['{#', '#}'],
	locals: { title: services.config.name },
	cache: false,
});

// Регистрируем новые теги.
tags.forEach(function (tag) {
	swig.setTag(tag.name, tag.parse, tag.compile, tag.ends, tag.block);
});

module.exports = swig;
